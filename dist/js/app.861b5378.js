(function(){"use strict";var e={8736:function(e,t,n){var r=n(9242),s=n(3396);const o={id:"app_content"},i={key:1,id:"container"},a=(0,s._)("footer",null,[(0,s.Uk)(" Developped by "),(0,s._)("a",{href:"https://github.com/HectoFR",target:"_blank"},"HectoFR"),(0,s.Uk)(" - This project has nothing to do with the actual "),(0,s._)("a",{href:"https://www.yazio.com/en",target:"_blank"},"YAZIO"),(0,s.Uk)(" app. ")],-1);function u(e,t,n,r,u,l){const c=(0,s.up)("LoginForm"),d=(0,s.up)("HeaderBar"),p=(0,s.up)("router-view");return(0,s.wg)(),(0,s.iD)("div",o,[u.logged?((0,s.wg)(),(0,s.iD)("div",i,[(0,s.Wm)(d),(0,s._)("main",null,[(0,s.Wm)(p)]),a])):((0,s.wg)(),(0,s.j4)(c,{key:0}))])}const l=e=>((0,s.dD)("data-v-968571f6"),e=e(),(0,s.Cn)(),e),c={id:"login"},d=["src"],p=l((()=>(0,s._)("h2",null,"Connexion",-1))),g={class:"form-content"},h=l((()=>(0,s._)("label",null,"Email",-1))),m=l((()=>(0,s._)("label",null,"Mot de passe",-1))),w=l((()=>(0,s._)("div",null,[(0,s._)("button",{type:"submit"},"Connexion")],-1)));function f(e,t,o,i,a,u){return(0,s.wg)(),(0,s.iD)("div",c,[(0,s._)("img",{src:n(6949)},null,8,d),(0,s._)("form",{onSubmit:t[2]||(t[2]=(0,r.iM)(((...e)=>u.login&&u.login(...e)),["prevent"]))},[p,(0,s._)("div",g,[(0,s._)("div",null,[h,(0,s.wy)((0,s._)("input",{type:"email",name:"email","onUpdate:modelValue":t[0]||(t[0]=e=>a.email=e)},null,512),[[r.nr,a.email]])]),(0,s._)("div",null,[m,(0,s.wy)((0,s._)("input",{type:"password",name:"password","onUpdate:modelValue":t[1]||(t[1]=e=>a.password=e)},null,512),[[r.nr,a.password]])]),w])],32)])}var A={name:"LoginForm",components:{},data(){return{email:"",password:""}},methods:{login(){return this.$store.dispatch("login",{username:this.email,password:this.password}).then((()=>{this.$emit("logged")}))}}},k=n(89);const b=(0,k.Z)(A,[["render",f],["__scopeId","data-v-968571f6"]]);var y=b,D=n(7139);const v=["src"],C={key:0};function K(e,t,r,o,i,a){(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("header",null,[(0,s._)("nav",null,[(0,s._)("img",{src:n(6949)},null,8,v),e.user?((0,s.wg)(),(0,s.iD)("div",C,(0,D.zw)(e.user.firstname||e.user.lastname?`${e.user.firstname} ${e.user.lastname}`:e.user.email),1)):(0,s.kq)("",!0),(0,s._)("ul",null,[(0,s.kq)("",!0),(0,s.kq)("",!0),(0,s.kq)("",!0),(0,s._)("li",{onClick:t[0]||(t[0]=(...e)=>a.logout&&a.logout(...e))}," Déconnexion ")])])])}var z=n(65),_={name:"HeaderBar",methods:{logout(){this.$store.commit("setToken",null)}},computed:{...(0,z.Se)(["user"])}};const E=(0,k.Z)(_,[["render",K],["__scopeId","data-v-2fb35df6"]]);var I=E,M={name:"App",components:{LoginForm:y,HeaderBar:I},data(){return{logged:!1}},computed:{...(0,z.Se)(["token"])},watch:{token:{handler(){this.token?this.$store.dispatch("getUser").then((()=>{this.logged=!0})):this.logged=!1},immediate:!0}},methods:{}};const Q=(0,k.Z)(M,[["render",u]]);var O=Q,U=n(2483);const G={id:"home"},Y=(0,s._)("h2",null,"Objectifs",-1),L={class:"content"},F={id:"meals_exercices"},H={id:"meals"},x={class:"nutrients"},j={class:"energy"},q={class:"protein"},B={class:"fat"},N={class:"carb"},S={id:"exercices"},T=(0,s._)("h3",null,"Exercices",-1),J={class:"nutrients"};function P(e,t,n,o,i,a){return(0,s.wg)(),(0,s.iD)("div",G,[(0,s._)("div",null,[(0,s.wy)((0,s._)("input",{id:"current_date",type:"date","onUpdate:modelValue":t[0]||(t[0]=e=>a.currentDate=e)},null,512),[[r.nr,a.currentDate]])]),Y,(0,s._)("div",L,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.goalsWithExercises,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e[0],class:(0,D.C_)(e[0])},[(0,s._)("strong",null,(0,D.zw)(i.goalsLabels[e[0]])+" ("+(0,D.zw)(i.units[e[0]])+")",1),(0,s._)("p",null,(0,D.zw)(a.totalNutrients[e[0]])+" sur "+(0,D.zw)(e[1]),1),(0,s._)("p",null,(0,D.zw)(e[1]-a.totalNutrients[e[0]]),1)],2)))),128))]),(0,s._)("div",F,[(0,s._)("div",H,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.iterableDaytimes,((e,t)=>((0,s.wg)(),(0,s.iD)("ul",{key:t},[(0,s._)("li",null,[(0,s._)("h3",null,[(0,s.Uk)((0,D.zw)(i.daytimesLabels[t])+" ",1),(0,s._)("ul",x,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.totalNutrient(e),((e,t)=>((0,s.wg)(),(0,s.iD)("li",{key:e,class:(0,D.C_)(t)},(0,D.zw)(e)+(0,D.zw)(i.units[t]),3)))),128))])]),(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e,(e=>((0,s.wg)(),(0,s.iD)("li",{class:"meal-item",key:e.id},[(0,s._)("span",{class:(0,D.C_)(["circle",a.getType(e)])},null,2),(0,s._)("ul",null,[(0,s._)("li",j,(0,D.zw)(e.nutrient.energy)+"kcal",1),(0,s._)("li",q,(0,D.zw)(e.nutrient.protein)+"g",1),(0,s._)("li",B,(0,D.zw)(e.nutrient.fat)+"g",1),(0,s._)("li",N,(0,D.zw)(e.nutrient.carb)+"g",1)]),(0,s._)("span",null,(0,D.zw)(e.serving_quantity)+" "+(0,D.zw)(e.serving)+" - "+(0,D.zw)(e.product.name),1)])))),128))])])])))),128))]),(0,s._)("div",S,[T,(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.exercises,(e=>((0,s.wg)(),(0,s.iD)("li",{key:e.id},[(0,s._)("h3",null,[(0,s.Uk)((0,D.zw)(e.name)+" ("+(0,D.zw)(e.duration)+"min) ",1),(0,s._)("ul",J,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.totalExercicesNutrients,((e,t)=>((0,s.wg)(),(0,s.iD)("li",{key:e,class:(0,D.C_)(t)},(0,D.zw)(e)+(0,D.zw)(i.units[t]),3)))),128))])])])))),128))])])])])}n(7658);var R=n(5743),V=n.n(R),Z={name:"HomeView",components:{},data(){return{goals:{},items:[],exercises:[],goalsLabels:{energy:"Calories",protein:"Protéines",fat:"Lipides",carb:"Glucides",step:"Marche"},daytimesLabels:{breakfast:"Petit déjeuner",lunch:"Déjeuner",snack:"Snack",diner:"Diner"},units:{energy:"kcal",protein:"g",fat:"g",carb:"g",step:"pas"}}},computed:{...(0,z.Se)(["user"]),currentDate:{get(){return V()(this.$store.getters.currentDate).format("YYYY-MM-DD")},set(e){this.$store.commit("setCurrentDate",e),this.getInfos()}},goalsWithExercises(){const e={...this.goals};return Object.entries(this.totalExercicesNutrients).forEach((([t,n])=>{e[t]+=n})),Object.entries(e)},iterableDaytimes(){const e={breakfast:[],lunch:[],snack:[],diner:[]};return this.items.forEach((t=>{e[t.daytime].push(t)})),e},totalNutrients(){const e={energy:0,protein:0,fat:0,carb:0};return this.items.forEach((t=>{e.energy+=t.nutrient.energy,e.protein+=t.nutrient.protein,e.fat+=t.nutrient.fat,e.carb+=t.nutrient.carb})),e},totalExercicesNutrients(){let e=0;return this.exercises.forEach((t=>e+=t.energy)),e=Math.round(e),{energy:e,protein:Math.round(e*(this.user.diet.protein_percentage/100)/4),carb:Math.round(e*(this.user.diet.carb_percentage/100)/4),fat:Math.round(e*(this.user.diet.fat_percentage/100)/9)}}},mounted(){this.getInfos()},methods:{getInfos(){this.getGoals(),this.getConsumedItems(),this.getExercises()},getType(e){return e.nutrient.protein>e.nutrient.fat&&e.nutrient.protein>e.nutrient.carb?"protein":e.nutrient.fat>e.nutrient.protein&&e.nutrient.fat>e.nutrient.carb?"fat":e.nutrient.carb>e.nutrient.protein&&e.nutrient.carb>e.nutrient.fat?"carb":void 0},displayNutrient(e){return`${e.protein} P / ${e.carb} G / ${e.fat} L`},totalNutrient(e){const t={energy:0,protein:0,fat:0,carb:0};return e.forEach((e=>{t.energy+=e.nutrient.energy,t.protein+=e.nutrient.protein,t.fat+=e.nutrient.fat,t.carb+=e.nutrient.carb})),t},getGoals(){this.$store.dispatch("goals").then((e=>{this.goals={energy:Math.round(e["energy.energy"]),protein:Math.round(e["nutrient.protein"]),fat:Math.round(e["nutrient.fat"]),carb:Math.round(e["nutrient.carb"])}}))},getConsumedItems(){this.$store.dispatch("consumedItemsWithProductInfos").then((e=>{this.items=e}))},getExercises(){this.$store.dispatch("exercises").then((e=>{this.exercises=e.training}))}}};const W=(0,k.Z)(Z,[["render",P]]);var X=W;const $=[{path:"/",name:"home",component:X}],ee=(0,U.p7)({history:(0,U.r5)(),routes:$});var te=ee;const ne="1_4hiybetvfksgw40o0sog4s884kwc840wwso8go4k8c04goo4c",re="6rok2m65xuskgkgogw40wkkk8sw0osg84s8cggsc4woos4s8o",se="https://prox.heckmann.dev/https://yzapi.yazio.com/v13";var oe=(0,z.MT)({state:{token:localStorage.getItem("YAZIO_TOKEN")||null,user:null,currentDate:V()().format("YYYY-MM-DD")},getters:{token(e){return e.token},user(e){return e.user},currentDate(e){return e.currentDate}},mutations:{setToken(e,t){t?localStorage.setItem("YAZIO_TOKEN",t):localStorage.removeItem("YAZIO_TOKEN"),e.token=t},setUser(e,t){e.user=t},setCurrentDate(e,t){e.currentDate=t}},actions:{login(e,{username:t,password:n}){return fetch(`${se}/oauth/token`,{method:"POST",body:JSON.stringify({client_id:ne,client_secret:re,username:t,password:n,grant_type:"password"})}).then((e=>e.json())).then((t=>(e.commit("setToken",t.access_token),t.access_token)))},request(e,{url:t,method:n="GET",body:r}){return fetch(`${se}${t}`,{method:n,body:r,headers:{Authorization:`Bearer ${e.state.token}`}}).then((e=>{if(e.status>=200&&e.status<=299)return e.json();throw e}))},goals(e){return e.dispatch("request",{url:`/user/goals/?date=${e.getters.currentDate}`})},product(e,t){return e.dispatch("request",{url:`/products/${t}`})},consumedItems(e){return e.dispatch("request",{url:`/user/consumed-items?date=${e.getters.currentDate}`})},consumedItemsWithProductInfos(e){return e.dispatch("consumedItems").then((t=>{const n=t.products.map((t=>e.dispatch("product",t.product_id).then((e=>{t.product=e}))));return Promise.all(n).then((()=>(t.products.forEach((e=>{e.nutrient={energy:Math.round(e.product.nutrients["energy.energy"]*e.amount,2),protein:Math.round(e.product.nutrients["nutrient.protein"]*e.amount,2),carb:Math.round(e.product.nutrients["nutrient.carb"]*e.amount,2),fat:Math.round(e.product.nutrients["nutrient.fat"]*e.amount,2)}})),t.products)))}))},exercises(e){return e.dispatch("request",{url:`/user/exercises?date=${e.getters.currentDate}`})},getUser(e){return e.dispatch("request",{url:"/user"}).then((t=>{e.commit("setUser",t)}))}},modules:{}});(0,r.ri)(O).use(oe).use(te).mount("#app")},6949:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAAAhCAYAAAA20CJoAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAACJpJREFUeJztmwlsFFUYgEcWWm4IoqC0RQpEuQTd7iwqwQV2d7q0OwNYCHKzK0QwKsFgMKBAAoJ4BDASRKQetG45rGBBFGi3WDGVkhgwSENDOXpSCi1daLk6/m+Pdo6d2TmWLiP9kz+b3X3z3v/efPP//zsGw0SEPoL1pbPbDadzowbRB7EneP/vxDrQv2L96OyoId5yh7FeYvW1ykMidA7WlnZHb6Vzo8sAnpvweQ40j3ZHpdHudgtod1sLnRO1HL5nwv8F3nLuqHrQk/D7jEjb3yoRFC88udEHQWlF6gWp3bxI96NVIiReLyMTmsac9vS9/V3oxkMdAxB5AKKZke5LJEWv10ePtFKTcAu5wmCl0kCzDFZyXYKFnPrC2ORnoMgjkbYxIHq7vRvYNtNgIdfjBLXPSNhdyG49kZwEf+skVwRhazGEpEYp0Nzb15Vu+KT/jdqpY8qrx1DlVSNeLavST6m8Mmpiec2UMcV3UnuXorxIattGgqSNBBXQI3IGALc2XUfjBFkk2AajnFw1WJJfk2SLhSRxK0njodqCMqD5emLSwKZrCWqzUvuCt0HRYrYazcnTvLaK1IF77aTuGseR8aId//TA2+PuuDuVhvQ22e1pz5IRVVeMKSWVfZ13KuOcdDCt6OtoqDZRf/+TMiRKysBrHaCnTKbO0IczSm4y3KRMbz9aDiAd2HpSTl2+Mba/KzgAw3YXHG1wd60R9ToQpq4mJl2rjHXeEwKHpVCuPG7ubCkQtARAOKMN3HfjJGuCmbQJ1ZuQSL7o9SjcQW9+gn/EzdRC+G0j/PYnp69eb+S3b1EoO1gPQSi7CT5AA2y2jlzviAcAsVKFAMlyCLepULcnOJT2L/kjkFaL99hZ0lCaHSfoge5ldaGrnp9SKwkcthZU9JrZKRQELe2BIBdZIqcNIdGbzY/jXHisyGNNSBS7DoUEuHEVfptFQw3rOmZbFuobufbyQiv6bkk2Cpe3L+UBZ6HeYxVq46r7SpfhoQ/8lnRBKEmuHkMqgQe8kKOxPMYh+PQ2DYxGAeLfEPtfKIGWer3RbE8JlauwyqsAyGCxb2B7HrJIiq3gkYawwz9J683Jw3z/pl7u3Saj7iQCKDFz77VGd/QtLkB1bxmUwdOkju9CDowGAUqwJo3lhgIl9aBZkNSyKgDSMa/FfWFT8gwLeSlmsg1jXuL7J6N2PIIHaYeMq/SJwwnneaELT6lUA1BFrONUSZ/pMaIGahAguAlVTIAQUGrrDCVKATIQ9lWcvGu1/LZhNtY8zrTRZnsMha/NAYCQDt1TUH/d/ejlAEANn8Xfkpw0i4SxsljnaFHjtAgQ02YreVttfVJEKUA4J/nG5Kzv+AUgNDHzPbSuhelcdblMgPyh7HK9f0ZWO320Ku/TpDFzPxAdGI0BpLfaR3GSUdH+hUvCARCM0YlwtA8wXUAe6F8uQEiTMjMrb2R3q7lqSQ4LQBVxjh3iHWQBVJ2QOGGOVMXZN7JQsA3mNJ6w/yK1/mAzKkgs32EBBMmw0psiR5QANMI0oTcneQ6ZkwoJd8aJQQJdHQwgpPrv8+sLX3KWhwmgwzmYqa3gwHDXRhTq/VlI5E+z4feNrDI222ClN0WOKAGI5y3FFgRDCABUw3hYEUCeW0IARadDFDMsKwtLCItz/HGmp6OL4MBoDCC0esxw5ej/FtnbUgIQ8qLM/vj3uJS2n9fcbx9ADUIAId05bn1pmDxQdnH3Od2FDOPux8BNcUtVdlymzgp2npP0Sq4fvA23LgNB7mYCZDKZJG3ZqJVwAJRAJE9U0X4e68ESC2FIF8/bE54QFuvYW4Dp2wkaprEkmhfCRFZzwylKADImkhamrWhKr7R9eNDrWZ4XADorBlD8F+fuXuw3X+VCIprKOzeLdlJjAKElfg5AC9TUJ1UUAQT5GTvMU/uUts9eTASAdC7PfjGA/GHsklqAymIcr4h2UmMAIY/Dyb22qalPcrvKpvE6I3uMLoajfQCoFtOlX58dCqDYLRdvFw1cWK0ifJ0qe3JWnKhhGgPI1y57d19tfVJE6ToQd5KiJGdDyTdnggG54cqctjpXXU4oiMwr88tK+82/oQigGMebMjuoCYDQgTDWgLbAWpBigKzkalYeZLFvkN02ax2NooeNSvK/aOGq6d/GVVcUCiLb+8eqC59+Q9a0HrzPD3KN0wpA6DRhkC0C+fW0wGYq8jis8ENQsrYzuNsY/DD47ZU+AEm+MEB1d0dnZZxekeUsWbPHemXVh6bKEyOn1YskzXUwdQ9y+EhgYDQIkLdt7wExVmKZjclYE2rJ4xzosBjLC1nJ01JsxcdNjOGGa4Np/AB+ydTi9jpX7SyAZRck18fbuDweBE+3XZfOLHPPKvz49/E00jVHiJuvp46kF2wfWb938oTj4GU8/rUetO2RB9+3hdo85XdOmwANHjy5Q7AFyudstr5i10XqQBlcd5VlK9g+2DS5h1B5dMKAf4KRXCTeyqaz0VhaTTyW7nnW8NPPYz86ai8OwIN0bU6iFyC/3tk+32Yu6eMYXhHrHHq+5wzeC4jSOvZgH2mFp/VroXrRkVbewXTfEdG70M4xuOmfo2k++hQ70ippnFQChI60Blv1R1sUaHqPHiz4XGsgqNzAGKmabQIw6Ux4/ACdYwCEdIvcjnDlQT9UD/WeErPBlw/J345BUMtZl1ELkF/Q4bL8kG+OcOyU7bUBlkFcePy6HqA5xABI8fGAgGgdoGZb7EvFXpNprs/rBY+FfF2G14ewAOQV9H4ayoNwsX1IlO8Q5G7kuWQ3AKCsCwJPI2h/gKYH6BE/QMfVdOT/KL7VXzKdt7dmIXehd8cwBQe67qPo0AuPvBcLrfZRqmoFUA4FAWgrswzA8zKo6CpzqzykArDkceDJBe0cabtaRSMCsOxgwLMJVPBAWKu0Ck8AmARQK8p5Im1LqzyY8h+SWF/tjyIa2AAAAABJRU5ErkJggg=="}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.m=e,function(){var e=[];n.O=function(t,r,s,o){if(!r){var i=1/0;for(c=0;c<e.length;c++){r=e[c][0],s=e[c][1],o=e[c][2];for(var a=!0,u=0;u<r.length;u++)(!1&o||i>=o)&&Object.keys(n.O).every((function(e){return n.O[e](r[u])}))?r.splice(u--,1):(a=!1,o<i&&(i=o));if(a){e.splice(c--,1);var l=s();void 0!==l&&(t=l)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[r,s,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var s,o,i=r[0],a=r[1],u=r[2],l=0;if(i.some((function(t){return 0!==e[t]}))){for(s in a)n.o(a,s)&&(n.m[s]=a[s]);if(u)var c=u(n)}for(t&&t(r);l<i.length;l++)o=i[l],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(c)},r=self["webpackChunkhecto"]=self["webpackChunkhecto"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(8736)}));r=n.O(r)})();
//# sourceMappingURL=app.861b5378.js.map